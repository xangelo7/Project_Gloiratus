zaraken_conquest = {
    header = "mission_image_general"
    icon = "general_1"

    repeatable = no

    chance = {}

    potential = { 
		OR = {
			tag = ZAK
			tag = ZAE
		}
    }

    abort = {}

    on_potential = {}

    on_start = {}

	on_abort = {}
	
	zaraken_conquest_preparation = {
        icon = "task_political"

        duration = 365

        potential = {}

        allow = {
        	treasury >= 75
        }

        on_start = {
        	add_treasury = -75
        }

        on_completion = {
        	add_country_modifier = {
        		name = zaraken_army_modifier
        		duration = -1
        	}
        }
    }

    zaraken_conquest_homeland = {
        icon = "task_expansion"

        requires = { zaraken_conquest_preparation }

        duration = 120

        bypass = {}

        potential = {}

        allow = {}

        on_completion = {
			area:vast_great_stepes_1 = { add_provincial_claim_effect = yes }
			area:zainddian_eteradica_area_6 = { add_provincial_claim_effect = yes }
			area:the_bronze_foothils_3 = { add_provincial_claim_effect = yes }
			area:vast_great_stepes_3 = { add_provincial_claim_effect = yes }
        }
	}

	zaraken_conquest_pacify = {
        icon = "task_political"

        requires = { zaraken_conquest_homeland } 

        potential = {}

        highlight = {
            scope:province = {
				AND = {
					NOT = {
						province_id = 4794
						province_id = 4879
						province_id = 4915
					}
					OR = {
						is_in_area = zainddian_eteradica_area_6
						is_in_area = the_bronze_foothils_3
						is_in_area = vast_great_stepes_3	
						is_in_area = vast_great_stepes_1					
					}
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = zainddian_eteradica_area_6
			owns_or_subject_owns_area = the_bronze_foothils_3
			owns_or_subject_owns_area = vast_great_stepes_1
			owns_or_subject_owns = 4761
			owns_or_subject_owns = 4760
			owns_or_subject_owns = 4704
			owns_or_subject_owns = 4666
			owns_or_subject_owns = 4575
			owns_or_subject_owns = 4619
        }

        on_completion = {
        	add_country_modifier = {
        		name = zaraken_great_campaign_modifier
        		duration = 9125
			}
			area:vast_great_stepes_4 = { add_provincial_claim_effect = yes }
        }
	}

	zaraken_conquest_east_1 = {
        icon = "task_political"

        requires = { zaraken_conquest_pacify } 

        potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = vast_great_stepes_4
					is_in_area = vast_great_stepes_3			
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = vast_great_stepes_4 
        	owns_or_subject_owns_area = vast_great_stepes_3 
        }

        on_completion = {
			custom_tooltip = zaraken_march_tt
        	trigger_event = {
        		id = zaraken.1
        	}
        }
	}
	
	zaraken_conquest_west_1 = {
        icon = "task_political"

        requires = { zaraken_conquest_pacify } 

        potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = zainddian_eteradica_area_9
					is_in_area = zainddian_eteradica_area_7
					is_in_area = zainddian_eteradica_area_5
					is_in_area = zainddian_eteradica_area_4	
					is_in_area = zainddian_eteradica_area_8			
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = zainddian_eteradica_area_9 
        	owns_or_subject_owns_area = zainddian_eteradica_area_7 
        	owns_or_subject_owns_area = zainddian_eteradica_area_5 
			owns_or_subject_owns_area = zainddian_eteradica_area_4
			owns_or_subject_owns_area = zainddian_eteradica_area_8 
        }

        on_completion = {
			custom_tooltip = zaraken_autonomy_tt
			hidden_effect = {
				p:4525.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4785.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4698.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4464.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4626.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
			}       	
        }
	}
	
	zaraken_conquest_west_2 = {
        icon = "task_political"

        requires = { zaraken_conquest_west_1 } 

        potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = zainddian_eteradica_area_10
					is_in_area = zainddian_eteradica_area_3
					is_in_area = zainddian_eteradica_area_11
					is_in_area = zainddian_eteradica_area_2			
					is_in_area = zainddian_eteradica_area_12
					province_id = 4810
					province_id = 4809
					province_id = 4756
					province_id = 4709 	
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = zainddian_eteradica_area_10 
        	owns_or_subject_owns_area = zainddian_eteradica_area_3 
        	owns_or_subject_owns_area = zainddian_eteradica_area_11 
			owns_or_subject_owns_area = zainddian_eteradica_area_2 
			owns_or_subject_owns_area = zainddian_eteradica_area_12
			owns_or_subject_owns = 4810
			owns_or_subject_owns = 4809
			owns_or_subject_owns = 4756
			owns_or_subject_owns = 4709 
        }

        on_completion = {
			custom_tooltip = zaraken_autonomy_tt
			hidden_effect = {
				p:4781.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4691.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4735.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4858.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4743.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
				p:4809.state = {
					add_state_modifier = {
						name = "zaraken_pacification_modifier"
						duration = -1
					}
				}
			}	
        }
	}

	zaraken_conquest_capital = {
        icon = "task_political"

        requires = { 
			zaraken_conquest_west_2
			zaraken_conquest_east_1
		} 

        potential = {}

        highlight = {}

        allow = {}

        on_completion = {
			if = {
				limit = {
					p:4809 = { is_capital = no }
				}
				set_capital = 4809
				hidden_effect = {
					p:4809.state = {
						set_state_capital = 4809
						remove_state_modifier = zaraken_pacification_modifier
						add_state_modifier = {
							name = "zaraken_capital_modifier"
							duration = -1
						}
					}
				}
			}
			add_political_influence = 200
			every_province = {
				limit = {
					OR = {
						is_owned_by = ZK1
						is_owned_by = ZAR
						is_owned_by = ZK1
					}		
				}
				set_owned_by = ROOT
			}
			trigger_event = {
        		id = zaraken.2
			}
			area:the_iron_foothill_4 = { add_provincial_claim_effect = yes }
			area:the_iron_foothill_5 = { add_provincial_claim_effect = yes }
			area:shout_eteradica_area_6 = { add_provincial_claim_effect = yes }
			area:shout_eteradica_area_1 = { add_provincial_claim_effect = yes }
			area:shout_eteradica_area_2 = { add_provincial_claim_effect = yes }
			area:shout_eteradica_area_4 = { add_provincial_claim_effect = yes }
        }
	}

	zaraken_conquest_west_3 = {
        icon = "task_political"

        requires = { zaraken_conquest_capital } 

		potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = the_iron_foothill_4
					is_in_area = the_iron_foothill_5
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = the_iron_foothill_4 
        	owns_or_subject_owns_area = the_iron_foothill_5 
        }

        on_completion = {
        	p:4524.state = {
                add_state_modifier = {
                    name = "zaraken_dessert_modifier"
                    duration = -1
                }
            }
            p:4474.state = {
                add_state_modifier = {
                    name = "zaraken_dessert_modifier"
                    duration = -1
                }
			}
			add_country_modifier = {
        		name = zaraken_raids_modifier
        		duration = -1
			}
			area:the_iron_foothill_2 = { add_provincial_claim_effect = yes }
			area:the_iron_foothill_3 = { add_provincial_claim_effect = yes }
        }
	}

	zaraken_conquest_west_4 = {
        icon = "task_political"

        requires = { zaraken_conquest_capital } 

		potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = shout_eteradica_area_1
					is_in_area = shout_eteradica_area_2
					is_in_area = shout_eteradica_area_4
					province_id = 4665
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = shout_eteradica_area_1 
			owns_or_subject_owns_area = shout_eteradica_area_2
			owns_or_subject_owns_area = shout_eteradica_area_4
			owns_or_subject_owns = 4665
        }

        on_completion = {
			custom_tooltip = zaraken_march_tt
			trigger_event = {
        		id = zaraken.3
			}
			area:shout_eteradica_area_3 = { add_provincial_claim_effect = yes }
			area:north_eteradica_area_4 = { add_provincial_claim_effect = yes }
			area:north_eteradica_area_5 = { add_provincial_claim_effect = yes }
			area:north_eteradica_area_1 = { add_provincial_claim_effect = yes }
        }
	}

	zaraken_conquest_west_5 = {
        icon = "task_political"

        requires = { zaraken_conquest_west_4 } 

		potential = {}
		
        highlight = {
            scope:province = {
				AND = {
					NOT = {
						province_id = 3331
						province_id = 3435
					}
					OR = {
						is_in_area = shout_eteradica_area_3
						is_in_area = north_eteradica_area_4
						is_in_area = north_eteradica_area_5
						is_in_area = north_eteradica_area_1
					}
				}		
			}
		}

        allow = { 
            owns_or_subject_owns_area = shout_eteradica_area_3 
			owns_or_subject_owns_area = north_eteradica_area_4
			owns_or_subject_owns_area = north_eteradica_area_5
			owns_or_subject_owns = 3453
			owns_or_subject_owns = 3565
			owns_or_subject_owns = 3544
			owns_or_subject_owns = 3486
			owns_or_subject_owns = 3408
			owns_or_subject_owns = 3605
			owns_or_subject_owns = 3564
			owns_or_subject_owns = 3764
			owns_or_subject_owns = 3686
        }

        on_completion = {
			custom_tooltip = zaraken_march_tt
			trigger_event = {
        		id = zaraken.5
			}
        }
	}

	zaraken_conquest_north_1 = {
        icon = "task_political"

        requires = { zaraken_conquest_west_3 } 

		potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = the_iron_foothill_2
					is_in_area = the_iron_foothill_3 
				}
			}
		}

        allow = { 
            owns_or_subject_owns_area = the_iron_foothill_2
			owns_or_subject_owns_area = the_iron_foothill_3 
        }

        on_completion = {
			custom_tooltip = zaraken_march_tt
			trigger_event = {
        		id = zaraken.4
			}
			area:shout_eteradica_area_5 = { add_provincial_claim_effect = yes }
			area:north_eteradica_area_2 = { add_provincial_claim_effect = yes }
			area:north_eteradica_area_1 = { add_provincial_claim_effect = yes }
			area:the_iron_foothill_1 = { add_provincial_claim_effect = yes }
        }
	}
	
	zaraken_conquest_north_2 = {
        icon = "task_political"

        requires = { zaraken_conquest_north_1 } 

		potential = {}

        highlight = {
            scope:province = {
				OR = {
					is_in_area = shout_eteradica_area_5
					is_in_area = shout_eteradica_area_6
					is_in_area = the_iron_foothill_1 
					is_in_area = north_eteradica_area_3 
					is_in_area = north_eteradica_area_2 
				}
			}
		}

        allow = { 
			owns_or_subject_owns_area = shout_eteradica_area_5
			owns_or_subject_owns_area = shout_eteradica_area_6
			owns_or_subject_owns_area = north_eteradica_area_3
			owns_or_subject_owns_area = north_eteradica_area_2
			owns_or_subject_owns_area = the_iron_foothill_1 
        }

        on_completion = {
			custom_tooltip = zaraken_march_tt
			trigger_event = {
        		id = zaraken.6
			}
        }
	}

	zaraken_conquest_final = {
        icon = "task_political"

		duration = 365
		
		requires = { 
			zaraken_conquest_north_2 
			zaraken_conquest_west_5
		} 

        potential = {}

        allow = {
        	treasury >= 500
        }

        on_start = {
        	add_treasury = -500
        }

        on_completion = {
			add_country_modifier = {
        		name = zaraken_victory_modifier
        		duration = 830
        	}
        }
	}	
	
	zaraken_conquest_reform_trade = {
        icon = "task_political"

		duration = 200
		
		requires = { 
			zaraken_conquest_final
		} 

        potential = {}

        allow = {
        	treasury >= 250
        }

        on_start = {
        	add_treasury = -250
        }

        on_completion = {
			add_country_modifier = {
        		name = zaraken_trade_reform_modifier
        		duration = -1
        	}
        }
	}
	
	zaraken_conquest_reform_military = {
        icon = "task_political"

		duration = 200
		
		requires = { 
			zaraken_conquest_final
		} 

        potential = {}

        allow = {
        	treasury >= 250
        }

        on_start = {
        	add_treasury = -250
        }

        on_completion = {
			add_country_modifier = {
        		name = zaraken_military_reform_modifier
        		duration = -1
        	}
        }
	}
	
	zaraken_conquest_reform_taxes= {
        icon = "task_political"

		duration = 200
		
		requires = { 
			zaraken_conquest_final
		} 

        potential = {}

        allow = {
        	treasury >= 250
        }

        on_start = {
        	add_treasury = -250
        }

        on_completion = {
			add_country_modifier = {
        		name = zaraken_tax_reform_modifier
        		duration = -1
        	}
        }
	}
	
	zaraken_conquest_reform_diplomacy = {
        icon = "task_political"

		duration = 200
		
		requires = { 
			zaraken_conquest_reform_taxes
			zaraken_conquest_reform_military
			zaraken_conquest_reform_trade
		} 

        potential = {}

        allow = {
        	treasury >= 250
        }

        on_start = {
        	add_treasury = -250
        }

        on_completion = {
			add_country_modifier = {
        		name = zaraken_subjects_modifier
        		duration = -1
        	}
        }
	}
	
	zaraken_conquest_reform_final = {
        icon = "task_political"

		duration = 60

		final=yes
		
		requires = { 
			zaraken_conquest_reform_diplomacy
		} 

        potential = {}

        allow = {
        }

        on_start = {
        }

        on_completion = {
			add_country_modifier = {
        		name = zaraken_empire_modifier
        		duration = -1
			}
			custom_tooltip = zaraken_hegemony_tt
			hidden_effect = {
				p:4781.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4691.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4735.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4858.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4743.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4809.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4525.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4785.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4698.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4464.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
				p:4626.state = {
					remove_state_modifier = zaraken_pacification_modifier
				}
			}		
			trigger_event = {
        		id = zaraken.7
			}
        }
    }
}