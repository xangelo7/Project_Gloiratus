namespace = rel_flavor_the_first_emperor

# Asclepian wise-man
rel_flavor_the_first_emperor.1 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.1.t"
	desc = "rel_flavor_the_first_emperor.1.desc"
	picture = ascetic
	
	left_portrait = current_ruler

	goto_location = scope:randomized_country_province
	
	trigger = {
		religion = the_first_emperor
		current_ruler = {
			NOT = { has_character_modifier = character_improvement_asclepian_wiseman }
		}
	}

	immediate = {
		random_owned_province = {
			save_scope_as = randomized_country_province
		}
	}

	option = { # Bring him to court
		name = "rel_flavor_the_first_emperor.1.a"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 3
		}
		current_ruler = {
			add_character_modifier = {
				name = character_improvement_asclepian_wiseman
				duration = 7300
			}
		}
		hidden_effect = {
			trigger_event = {
				id = rel_flavor_the_first_emperor.2 
				days = { 1000 7300 }
			}
		}
	}	

	option = { # Send him to your provinces
		name = "rel_flavor_the_first_emperor.1.b"
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_asclepian_wiseman
				duration = 3650
			}
		}
		if = {
			limit = {
				scope:randomized_country_province = {
					any_neighbor_province = {
						owner = root
					}
				}
			}
			scope:randomized_country_province = {
				random_neighbor_province = {
					limit = {
						owner = root
					}
					save_scope_as = randomized_country_province_2
					add_province_modifier = {
						name = province_improvement_asclepian_wiseman
						duration = 3650
					}
				}
			}
			if = {
				limit = {
					any_owned_province = {
						any_neighbor_province = {
							THIS = scope:randomized_country_province
						}
						any_neighbor_province = {
							THIS = scope:randomized_country_province_2
						}
					}
				}
				random_owned_province = {
					limit = {
						any_neighbor_province = {
							THIS = scope:randomized_country_province
						}
						any_neighbor_province = {
							THIS = scope:randomized_country_province_2
						}
					}
					add_province_modifier = {
						name = province_improvement_asclepian_wiseman
						duration = 3650
					}
				}
			}
		}
	}

	option = { # Let him move on
		name = "rel_flavor_the_first_emperor.1.c"
		#custom_tooltip = "no_effect_tooltip"
		current_ruler = {
			add_popularity = popularity_small
		}
	}
}

# Asclepius wise-man disappears
rel_flavor_the_first_emperor.2 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.2.t"
	desc = "rel_flavor_the_first_emperor.2.desc"
	picture = ascetic
	
	left_portrait = current_ruler

	trigger = {
		religion = the_first_emperor
		current_ruler = {
			has_character_modifier = character_improvement_asclepian_wiseman
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.2.a"
		current_ruler = {
			remove_character_modifier = character_improvement_asclepian_wiseman
		}
	}
}

# The oracle of Delpi prophecises negatively for the nation
rel_flavor_the_first_emperor.3 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.3.t"
	desc = "rel_flavor_the_first_emperor.3.desc"
	picture = hellenic_temple
	
	left_portrait = current_ruler

	trigger = {
		religion = the_first_emperor
		NOR = {
			has_variable = rel_flavor_the_first_emperor_3_cooldown
			has_variable = rel_flavor_the_first_emperor_6_cooldown
			has_country_modifier = country_diminishment_oracle_of_delphi
			has_country_modifier = country_improvement_oracle_of_delphi
		}
	}

	weight_multiplier = {
		modifier = {
			factor = 4
			current_ruler = {
				OR = {
					char_is_irreligious_trigger = yes
					char_is_bad_leader_trigger = yes
				}
			}
		}
	}

	immediate = {
		current_ruler = {
			save_scope_as = country_ruler
		}
		hidden_effect = {
			set_variable = {
				name = rel_flavor_the_first_emperor_3_cooldown
				days = 3650
			}
		}
	}

	option = { # A religious ceremony to try to appease the Gods
		name = "rel_flavor_the_first_emperor.3.a"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 3
		}
		hidden_effect = {
			random_list = {
				10 = {
					trigger_event = {
						id = rel_flavor_the_first_emperor.4
						days = { 15 25 }
					}
				}
				5 = {
					trigger_event = {
						id = rel_flavor_the_first_emperor.5
						days = { 15 25 }
					}
				}
			}
		}
	}

	option = { # Try to convince your countrymen the Oracle is wrong
		name = "rel_flavor_the_first_emperor.3.b"
		add_political_influence = subtract_influence_large
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_medium
		}
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
	}

	option = { # Ignore the prophecies
		name = "rel_flavor_the_first_emperor.3.c"
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_huge
		}
		add_country_modifier = {
			name = country_diminishment_oracle_of_delphi
			duration = 3650
		}
		current_ruler = {
			add_popularity = subtract_popularity_medium
		}
	}
}

# The Gods have been appeased - Extension of Oracle of Delphi prophecises negatively
rel_flavor_the_first_emperor.4 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.4.t"
	desc = "rel_flavor_the_first_emperor.4.desc"
	picture = great_city
	
	left_portrait = current_ruler

	trigger = {
		current_ruler = {
			THIS = scope:country_ruler
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.4.a"
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = legitimacy_medium
		}
		current_ruler = {
			add_popularity = popularity_small
		}
	}
}

# The Gods have not been appeased - Extension of Oracle of Delphi prophecises negatively
rel_flavor_the_first_emperor.5 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.5.t"
	desc = "rel_flavor_the_first_emperor.5.desc"
	picture = natural_disaster
	
	left_portrait = current_ruler

	trigger = {
		current_ruler = {
			THIS = scope:country_ruler
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.5.a"
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_large
		}
		add_country_modifier = {
			name = country_diminishment_oracle_of_delphi
			duration = 3650
		}
		current_ruler = {
			add_popularity = subtract_popularity_medium
		}
	}
}

# The Oracle of Delphi prophecises positively for the nation
rel_flavor_the_first_emperor.6 = {
	type = country_event 
	title = "rel_flavor_the_first_emperor.6.t"
	desc = "rel_flavor_the_first_emperor.6.desc"
	picture = great_city
	
	left_portrait = current_ruler

	trigger = {
		religion = the_first_emperor
		current_ruler = {
			OR = {
				char_is_religious_trigger = yes
				char_is_good_leader_trigger = yes
			}
		}
		NOR = {
			has_variable = rel_flavor_the_first_emperor_3_cooldown
			has_variable = rel_flavor_the_first_emperor_6_cooldown
			has_country_modifier = country_diminishment_oracle_of_delphi
			has_country_modifier = country_improvement_oracle_of_delphi
		}
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				name = rel_flavor_the_first_emperor_6_cooldown
				days = 3650
			}
		}
	}

	option = { # Celebrate the announcement with a huge ceremony to Apollo
		name = "rel_flavor_the_first_emperor.6.a"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
		add_country_modifier = {
			name = country_improvement_oracle_of_delphi
			duration = 5475
		}
	}

	option = { # Thank the Oracle
		name = "rel_flavor_the_first_emperor.6.b"
		add_country_modifier = {
			name = country_improvement_oracle_of_delphi
			duration = 3650
		}
	}
}

# Athena's bountiful olive blessing
rel_flavor_the_first_emperor.7 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.7.t"
	desc = "rel_flavor_the_first_emperor.7.desc"
	picture = farming
	
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

	goto_location = scope:randomized_country_province
	
	trigger = {
		religion = the_first_emperor
		any_owned_province = { 
			trade_goods = olive 
			has_city_status = yes
		}
		any_character = {
			has_priest_office_trigger = yes
		}
		NOR = {
			has_country_modifier = country_improvement_athena_blessing
			any_owned_province = {
				has_province_modifier = province_improvement_athena_shrine
			}
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				trade_goods = olive
				has_city_status = yes
			}
			save_scope_as = randomized_country_province
		}
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.7.a"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
		add_country_modifier = {
			name = country_improvement_athena_blessing
			duration = 3650
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_athena_shrine
				duration = 1825
			}
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.7.b"
		add_country_modifier = {
			name = country_improvement_athena_blessing
			duration = 1825
		}
	}
}

# Choose a God/Goddess to support the war effort
rel_flavor_the_first_emperor.8 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.8.t"
	desc = "rel_flavor_the_first_emperor.8.desc"
	picture = elephant_battle
	
	left_portrait = current_ruler
	right_portrait = scope:randomized_priest

	trigger = {
		religion = the_first_emperor
		war = yes
		NOR = {
			has_country_modifier = country_improvement_war_ares_blessing
			has_country_modifier = country_improvement_war_hephaistos_blessing
			has_country_modifier = country_improvement_war_athena_blessing
			has_country_modifier = country_improvement_war_poseidon_blessing
		}
		any_character = {
			has_priest_office_trigger = yes
		}
	}

	immediate = {
		random_character = {
			limit = {
				has_priest_office_trigger = yes
			}
			save_scope_as = randomized_priest
		}
	}

	option = { # Ares Blessing
		name = "rel_flavor_the_first_emperor.8.a"
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_ares_blessing
			duration = 1825
		}
	}

	option = { # Hephaistos Blessing
		name = "rel_flavor_the_first_emperor.8.b"
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_hephaistos_blessing
			duration = 1825
		}
	}

	option = { # Athena Blessing
		name = "rel_flavor_the_first_emperor.8.c"
		trigger = {
			NOT = { country_culture_group = latin }
		}
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_athena_blessing
			duration = 1825
		}
	}

	option = { # Poseidon Blessing
		name = "rel_flavor_the_first_emperor.8.d"
		add_political_influence = subtract_influence_medium
		add_country_modifier = {
			name = country_improvement_war_poseidon_blessing
			duration = 1825
		}
	}

	option = { # No blessing
		name = "rel_flavor_the_first_emperor.8.e"
		custom_tooltip = "no_effect_tooltip"
	}
}

# Raving band of  Maenads / bandits
rel_flavor_the_first_emperor.9 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.9.t"
	desc = "rel_flavor_the_first_emperor.9.desc"
	picture = revolt
	
	left_portrait = current_ruler

	goto_location = scope:randomized_country_province
	
	trigger = {
		religion = the_first_emperor
		any_owned_province = { dominant_province_religion = the_first_emperor }
	}

	immediate = {
		random_owned_province = {
			limit = {
				dominant_province_religion = the_first_emperor
			}
			save_scope_as = randomized_country_province
		}
	}

	option = { # Have the soldiers deal with the threat
		name = "rel_flavor_the_first_emperor.9.a"
		subtract_manpower_effect_10 = yes
	}

	option = { # Raise a shrine to Dionysus to ward off the Maenads
		name = "rel_flavor_the_first_emperor.9.b"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 3
		}
		add_country_modifier = {
			name = country_improvement_dionysus_blessing
			duration = 3650
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_diminishment_maenads
				duration = 1095
			}
		}
	}

	option = { # Let them run wild
		name = "rel_flavor_the_first_emperor.9.c"
		remove_stability_effect = yes
		if = {
			limit = {
				is_monarchy = yes
			}
			add_legitimacy = subtract_legitimacy_medium
		}
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
		if = {
			limit = {
				is_tribal = yes
			}
			current_ruler = {
				add_prominence = subtract_prominence_large
			}
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_diminishment_maenads
				duration = 3650
			}
		}
	}
}

# Heraclean Way event
rel_flavor_the_first_emperor.10 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.10.t"
	desc = "rel_flavor_the_first_emperor.10.desc"
	picture = great_city
	
	left_portrait = current_ruler

	goto_location = scope:randomized_country_province
	
	trigger = {
		NOT = { has_variable = rel_flavor_the_first_emperor_10_cooldown }
		religion = the_first_emperor
		NOT = { has_country_modifier = country_improvement_heracles_blessing }
		NOT = {
			any_owned_province = {
				has_province_modifier = province_improvement_heraclean_path
			}
		}
		any_owned_province = {
			
			has_city_status = yes
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				
				has_city_status = yes
			}
			save_scope_as = randomized_country_province
		}
		hidden_effect = {
			set_variable = {
				name = rel_flavor_the_first_emperor_10_cooldown
				days = 3650
			}
		}
	}

	option = { # Push the myths hard
		name = "rel_flavor_the_first_emperor.10.a"
		remove_stability_effect_small = yes
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_heraclean_path
				duration = 3650
			}
		}
	}

	option = { # Hold a small festival in his honor
		name = "rel_flavor_the_first_emperor.10.b"
		add_stability_effect_small = yes
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
		add_country_modifier = {
			name = country_improvement_heracles_blessing
			duration = 3650
		}
	}
}


## Argonautica Event Chain ##
# Support the writing of the Argonautica - Part 1 - The Beginning
rel_flavor_the_first_emperor.11 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.11.t"
	desc = "rel_flavor_the_first_emperor.11.desc"
	picture = ascetic
	
	left_portrait = current_ruler

	trigger = {
		religion = the_first_emperor
		NOT = { has_variable = argonautica_event_fired }
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				name = argonautica_event_fired
			}
			random_list = {
				20 = { # Bad writer
					set_variable = {
						name = argonautica_writer_points
						value = 0
					}
				}
				50 = { # Average writer
					set_variable = {
						name = argonautica_writer_points
						value = 1
					}
				}
				20 = { # Great writer
					set_variable = {
						name = argonautica_writer_points
						value = 3
					}
				}
				10 = { # Amazing writer
					set_variable = {
						name = argonautica_writer_points
						value = 5
					}
				}
			}
		}
	}

	option = { # Support greatly
		name = "rel_flavor_the_first_emperor.11.a"
		custom_tooltip = "rel_flavor_the_first_emperor.11.a.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
		hidden_effect = {
			change_variable = {
				name = argonautica_writer_points
				add = 2
			}
			if = {
				limit = {
					var:argonautica_writer_points >= 5
				}
				trigger_event = {
					id = "rel_flavor_the_first_emperor.13"
					days = { 180 540 }
				}
			}
			else = {
				trigger_event = {
					id = "rel_flavor_the_first_emperor.12"
					days = { 180 540 }
				}
			}
		}
	}

	option = { # Make room
		name = "rel_flavor_the_first_emperor.11.b"
		custom_tooltip = "rel_flavor_the_first_emperor.11.a.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 2
		}
		hidden_effect = {
			trigger_event = {
				id = "rel_flavor_the_first_emperor.12"
				days = { 180 540 }
			}
		}
	}

	option = { # Do not support
		name = "rel_flavor_the_first_emperor.11.c"
		custom_tooltip = "rel_flavor_the_first_emperor.11.c.tt"
	}
}

# Support the writing of the Argonautica - Part 2 - More funding
rel_flavor_the_first_emperor.12 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.12.t"
	desc = "rel_flavor_the_first_emperor.12.desc"
	picture = war_chest
	
	left_portrait = current_ruler

	trigger = {

	}

	immediate = {

	}

	option = { # Large aid
		name = "rel_flavor_the_first_emperor.12.a"
		custom_tooltip = "rel_flavor_the_first_emperor.12.a.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 6
		}
		hidden_effect = {
			change_variable = {
				name = argonautica_writer_points
				add = 2
			}
			trigger_event = {
				id = "rel_flavor_the_first_emperor.13"
				days = { 180 540 }
			}
		}
	}

	option = { # Small aid
		name = "rel_flavor_the_first_emperor.12.b"
		custom_tooltip = "rel_flavor_the_first_emperor.12.a.tt"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 3
		}
		hidden_effect = {
			change_variable = {
				name = argonautica_writer_points
				add = 1
			}
			trigger_event = {
				id = "rel_flavor_the_first_emperor.13"
				days = { 180 540 }
			}
		}
	}

	option = { # Throw out
		name = "rel_flavor_the_first_emperor.12.c"
		custom_tooltip = "rel_flavor_the_first_emperor.11.c.tt"
	}
}

# Support the writing of the Argonautica - Part 3 - Finished Work
rel_flavor_the_first_emperor.13 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.13.t"
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					var:argonautica_writer_points >= 4
				}
				desc = "rel_flavor_the_first_emperor.13.desc.a"
			}
			triggered_desc = {
				trigger = {
					var:argonautica_writer_points < 4
					var:argonautica_writer_points >= 2
				}
				desc = "rel_flavor_the_first_emperor.13.desc.b"
			}
			triggered_desc = {
				trigger = {
					var:argonautica_writer_points < 2
				}
				desc = "rel_flavor_the_first_emperor.13.desc.c"
			}
		}
	}
	picture = scribe_tools

	left_portrait = current_ruler

	trigger = {

	}

	immediate = {
		
	}

	option = { # Fantastic finish
		name = "rel_flavor_the_first_emperor.13.a"
		trigger = {
			var:argonautica_writer_points >= 5
		}
		current_ruler = {
			add_popularity = popularity_large
		}
		add_country_modifier = {
			name = country_improvement_argonautica
			duration = 7300
		}
	}

	option = { # All right finish
		name = "rel_flavor_the_first_emperor.13.b"
		trigger = {
			var:argonautica_writer_points < 5
			var:argonautica_writer_points >= 3
		}
		current_ruler = {
			add_popularity = popularity_medium
		}
		add_country_modifier = {
			name = country_improvement_epic
			duration = 7300
		}
	}

	option = { # Weak finish
		name = "rel_flavor_the_first_emperor.13.c"
		trigger = {
			var:argonautica_writer_points < 3
		}
		current_ruler = {
			add_popularity = subtract_popularity_small
		}
	}

	after = {
		remove_variable = argonautica_writer_points
	}
}
## End Event Chain ##

# Inspired by Ares/Mars
rel_flavor_the_first_emperor.14 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.14.t"
	desc = "rel_flavor_the_first_emperor.14.desc"
	picture = elephant_battle
	
	left_portrait = current_ruler

	trigger = {
		religion = the_first_emperor
		NOT = { has_variable = rel_flavor_the_first_emperor_14_cooldown }
		NOT = { has_country_modifier = country_improvement_inspiring_soldier }
	}

	immediate = {
		hidden_effect = {
			set_variable = {
				name = rel_flavor_the_first_emperor_14_cooldown
				days = 5475
			}
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.14.a"
		create_character = {
			culture = root.current_ruler.culture
			religion = the_first_emperor
			female = no
			age = 25
			no_traits = yes
			no_stats = yes
			hidden_effect = {
				add_trait = brave
				amazing_martial_effect = yes
				good_charisma_effect = yes
				good_finesse_effect = yes
				average_zeal_effect = yes
				positive_martial_trait_effect = yes
			}
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.14.b"
		add_country_modifier = {
			name = country_improvement_inspiring_soldier
			duration = 1825
		}
	}
}

# Explosive commerce
rel_flavor_the_first_emperor.15 = {
	type = country_event
	title = "rel_flavor_the_first_emperor.15.t"
	desc = "rel_flavor_the_first_emperor.15.desc"
	picture = trade_port
	
	left_portrait = current_ruler

	goto_location = scope:randomized_country_province
	
	trigger = {
		religion = the_first_emperor
		any_owned_province = { 
			dominant_province_religion = the_first_emperor 
			has_city_status = yes
		}
	}

	immediate = {
		random_owned_province = {
			limit = {
				dominant_province_religion = the_first_emperor
				has_city_status = yes
			}
			save_scope_as = randomized_country_province
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.15.a"
		add_treasury = {
			value = root.has_monthly_income
			multiply = 6
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_touched_by_commerce_god
				duration = 1825
			}
		}
	}

	option = {
		name = "rel_flavor_the_first_emperor.15.b"
		add_treasury = {
			subtract = root.has_monthly_income
			multiply = 4
		}
		add_country_modifier = {
			name = country_improvement_commerce_blessing
			duration = 3650
		}
		scope:randomized_country_province = {
			add_province_modifier = {
				name = province_improvement_touched_by_commerce_god
				duration = 3650
			}
		}
	}
}