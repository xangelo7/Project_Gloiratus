namespace = civil_war

civil_war.1 = { #Civil war end event notifications for ORIGINAL COUNTRY WINNING
	type = country_event
	hidden = yes
	
	immediate = {
		save_scope_as = victorious_side
		if = {
			limit = {
				any_owned_province = {
					fort_level >= 2
					is_capital = no
				}
			}
			random_owned_province = {
				limit = {
					fort_level >= 2
				}
				save_scope_as = fort_flavor_location
			}
		}
		else = {
			random_owned_province = {
				weight = {
					modifier = {
						factor = 1000
						is_capital = no
					}
				}
				save_scope_as = fort_flavor_location
			}
		}
		scope:target = {
			save_scope_as = resistance_ruler
		}
		every_neighbour_country = {
			limit = {
				NOT = {
					war_with = ROOT
				}
			}
			trigger_event = { #Trigger infomercial
				id = civil_war.2 
				days = { 2 10 }
			}
		}
		if = {
			limit = {
				num_of_cities >= 100
			}
			every_country = {
				limit = {
					NOR = {
						this = ROOT
						any_neighbour_country = {
							this = ROOT
						}
					}
					num_of_cities >= 100
				}
				trigger_event = { #Trigger infomercial for great powers, if civil war target is great.
					id = civil_war.2 
					days = { 2 10 }
				}
			}
		}
	}

}

civil_war.2 = {
	type = country_event
	title = "civil_war.2.t"
	picture = revolt
	desc = {
		desc = "civil_war.2.desc"
		random_valid = {
			desc = civil_war.2.descSIEGE
			desc = civil_war.2.descSIEGE2 
			desc = civil_war.2.descBATTLE
			desc = civil_war.2.descBATTLE2
		}
		first_valid = {
			triggered_desc = {
				desc = civil_war.2.descOpinionGood
				trigger = {
					opinion = {
						target = scope:victorious_side
						value >= 40
					}
				}
			}
			triggered_desc = {
				desc = civil_war.2.descOpinionBad
				trigger = {
					opinion = {
						target = scope:victorious_side
						value >= 40
					}
				}
			}
			desc = civil_war.2.descOpinionNeutral
		}
	}
	
	left_portrait = scope:victorious_side.current_ruler
	right_portrait = scope:resistance_ruler
	
	immediate = {
		
	}
	
	option = {
		name = "civil_war.2.a"
	}
	
}

civil_war.3 = { #Civil war end event notifications for REBEL COUNTRY WINNING
	type = country_event
	hidden = yes
	
	immediate = {
		save_scope_as = victorious_side
		if = {
			limit = {
				any_owned_province = {
					fort_level >= 2
					is_capital = no
				}
			}
			random_owned_province = {
				limit = {
					fort_level >= 2
				}
				save_scope_as = fort_flavor_location
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_capital = no
				}
				save_scope_as = fort_flavor_location
			}
		}
		scope:target = {
			save_scope_as = resistance_ruler 
		}
		every_neighbour_country = {
			limit = {
				NOT = {
					war_with = ROOT
				}
			}
			trigger_event = { #Trigger infomercial
				id = civil_war.4
				days = { 2 10 }
			}
		}
		if = {
			limit = {
				num_of_cities >= 100
			}
			every_country = {
				limit = {
					NOR = {
						this = ROOT
						any_neighbour_country = {
							this = ROOT
						}
					}
					num_of_cities >= 100
				}
				trigger_event = { #Trigger infomercial for great powers, if civil war target is great.
					id = civil_war.4
					days = { 2 10 }
				}
			}
		}
	}

}

civil_war.4 = {
	type = country_event
	title = "civil_war.4.t"
	picture = revolt
	desc = {
		desc = "civil_war.4.desc"
		random_valid = {
			desc = civil_war.4.descSIEGE
			desc = civil_war.4.descSIEGE2
			desc = civil_war.4.descBATTLE
			desc = civil_war.4.descBATTLE2
		}
		first_valid = {
			triggered_desc = {
				desc = civil_war.4.descOpinionGood
				trigger = {
					opinion = {
						target = scope:victorious_side
						value >= 40
					}
				}
			}
			triggered_desc = {
				desc = civil_war.4.descOpinionBad
				trigger = {
					opinion = {
						target = scope:victorious_side
						value >= 40
					}
				}
			}
			desc = civil_war.4.descOpinionNeutral  
		}
	}
	
	left_portrait = scope:victorious_side.current_ruler
	right_portrait = scope:resistance_ruler
	
	immediate = {
		
	}
	
	option = {
		name = "civil_war.4.a"
	}
	
}