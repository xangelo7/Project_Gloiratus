namespace = royal_guards_mech

royal_guards_mech.1 = {
	type = country_event
	hidden = yes
	
	trigger = {	
		any_army = {	
			any_sub_unit = { 
				sub_unit_type = royal_guards 	
			}	
			NOT = { var:royal_guardian = commander  }
		}	
	}

	immediate = {  	
		every_unit = {
			every_sub_unit = {
			limit = { sub_unit_type = royal_guards }
			destroy_subunit = yes
			}
		}	
		random_unit = { 	
			limit = { 
				ROOT = { 
					trigger_if = { 
						limit = { has_variable = royal_guardian } 
						var:royal_guardian = prev.commander 
					} 
				} 
			} 	
			add_loyal_subunit = royal_guards 	
		}	
	}	
}
royal_guards_mech.2 = {
	type = country_event
	hidden = yes
	
	trigger = {
		NOT = { has_variable = royal_guardian }
		any_army = {		
			any_sub_unit = { 
				sub_unit_type = royal_guards 	
			}	
		}
	}

	immediate = { 
		every_unit = {
			every_sub_unit = {
				limit = { sub_unit_type = royal_guards }
				destroy_subunit = yes
			}
		}	
	}	
}
royal_guards_mech.3 = {
	type = country_event
	hidden = yes
	
	trigger = {	
		any_character = {	
			this = root.var:royal_guardian
			is_general = no
		}	
	}
	
	immediate = { 
		every_unit = {
			every_sub_unit = {
				limit = { sub_unit_type = royal_guards }
				destroy_subunit = yes
			}	
		}
		remove_variable = royal_guardian
	}
}	
	
	


